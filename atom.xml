<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Agphp Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.agphp.com/"/>
  <updated>2020-10-28T09:31:52.278Z</updated>
  <id>https://blog.agphp.com/</id>
  
  <author>
    <name>Huhijay</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Linux常用命令</title>
    <link href="https://blog.agphp.com/2019/05/22/linux-command.html"/>
    <id>https://blog.agphp.com/2019/05/22/linux-command.html</id>
    <published>2019-05-22T09:18:00.000Z</published>
    <updated>2020-10-28T09:31:52.278Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、linux目录结构"><a href="#一、linux目录结构" class="headerlink" title="一、linux目录结构"></a>一、linux目录结构</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">                                        /</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">|       |       |       |       |       |       |       |       |     |       |</span><br><span class="line">/bin    /boot   /dev    /etc    /home   /root    /run   /sbin   /tmp  /usr    /var</span><br></pre></td></tr></table></figure><ul><li>bin: binaries （二进制文件），存放着最经常使用的命令 </li><li>boot: 存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件。如内核、initrd，以及grub (BootLoader)</li><li>dev：device （设备），下存放的是 Linux 的外部设备，在 Linux 中访问设备的方式和访问文件的方式是相同的。</li><li>etc: etcetera（等等）用来存放所有的系统管理所需要的配置文件和子目</li><li>home: 用户的主目录，在 Linux 中，每个用户都有一个自己的劜，一般为账号名</li><li>lib: library （库），存放着系统最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库。</li><li>lost+fund: 一般情况下为空，当系统非法关机后这里存放了一些文件。</li><li>media: 系统自动设备一些设备，如U盘、光驱等，Linux 会把识别的设备挂在到这个目录。</li><li>mnt: 系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在 /mnt/ 上，然后进入该目录就可以查看光驱里的内容了。</li><li>opt: optional （可选），这是给主机额外安装软件所摆放的目录。比如你安装一个 ORACLE 数据库则就可以放到这个目录下。默认是空的。</li><li>proc: processes （进程），是一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件，这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。<br>这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件。</li><li>root: 该目录为系统管理员，也称作超级权限者的用户主目录。</li><li>sbin: super user binaries （超级用户二进制），这里存放的是系统管理员使用的系统管理程序。</li><li>selinux:  这个目录是 Redhat/CentOS 所特有的目录，Selinux 是一个安全机制，类似于 windows 的防火墙，但是这套机制比较复杂，这个目录就是存放selinux相关的文件的。</li><li>srv: 该目录存放一些服务启动之后需要提取的数据。</li><li>sys: 这是 Linux2.6 内核的一个很大的变化。该目录下安装了 2.6 内核中新出现的一个文件系统 sysfs 。sysfs 文件系统集成了下面3种文件系统的信息：针对进程信息的 proc 文件系统、针对设备的 devfs 文件系统以及针对伪终端的 devpts 文件系统。该文件系统是内核设备树的一个直观反映。当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中被创建。</li><li>tmp: temporary （临时），用来存放一些临时文件的。</li><li>usr: unix shared resources （共享资源），这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录。<ul><li>usr/bin: 系统用户使用的应用程序。</li><li>usr/sbin: 超级用户使用的比较高级的管理程序和系统守护程序。</li><li>usr/src: 内核源代码默认的放置目录。</li></ul></li><li>var: variable （变量），放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。</li><li>run: 是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。如果你的系统上有 /var/run 目录，应该让它指向 run。</li></ul><h1 id="二、linux命令"><a href="#二、linux命令" class="headerlink" title="二、linux命令"></a>二、linux命令</h1><h2 id="1、操作文件及目录"><a href="#1、操作文件及目录" class="headerlink" title="1、操作文件及目录"></a>1、操作文件及目录</h2><table><thead><tr><th>命令</th><th>参数</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td>cd</td><td></td><td>cd /home</td><td>切换目录</td></tr><tr><td>pwd</td><td></td><td>pwd</td><td>显示当前工作目录目录</td></tr><tr><td>touch</td><td></td><td>touch 1.txt</td><td>创建空文件</td></tr><tr><td>mkdir</td><td></td><td>mkdir testdir</td><td>创建一个新目录</td></tr><tr><td></td><td>-p</td><td>mkidr -p dir1/dir2/dir3/</td><td>创建多级目录，父目录不存在情况下先生成父目录</td></tr><tr><td>cp</td><td></td><td>cp 1.txt</td><td>复制文件或目录</td></tr><tr><td></td><td>-r</td><td>cp -r dir1/</td><td>递归处理，将指定目录下的文件与子目录一并拷贝</td></tr><tr><td>mv</td><td></td><td>mv dir1 dir2</td><td>移动文件或目录、文件或目录改名</td></tr><tr><td>rm</td><td></td><td>rm 1.txt</td><td>删除文件</td></tr><tr><td></td><td>-r<br />-f</td><td>rm -rf dir1</td><td>r同时删除该目录下的所有文件,<br />f强制删除文件或目录</td></tr><tr><td>rmdir</td><td></td><td>rmdir dir1</td><td>删除空目录</td></tr><tr><td>cat</td><td></td><td>cat 1.txt</td><td>显示文本文件内容</td></tr><tr><td>more</td><td></td><td>more 1.txt</td><td>分页显示文本文件内容，可前后翻页，空格向后，b向前</td></tr><tr><td>less</td><td></td><td>less 1.txt</td><td>分页显示文本文件内容，可前后翻页，空格向后，b向前，支持底行模式（后面介绍）</td></tr><tr><td>head</td><td></td><td>head 1.txt</td><td>查看文本开头部分，默认十行</td></tr><tr><td></td><td>-[num]</td><td>head -20 1.txt</td><td>查看文本开头部分指定行数</td></tr><tr><td>tail</td><td></td><td>tail 1.txt</td><td>查看文本结尾部分，默认十行</td></tr><tr><td></td><td>-[num]</td><td>tail -20 1.txt</td><td>查看文本结尾部分指定行数</td></tr><tr><td></td><td>-f</td><td>tail -f 1.txt</td><td>循环滚动读取文件并动态显示在屏幕上，根据文件属性追踪</td></tr><tr><td></td><td>-F</td><td>tail -F 1.txt</td><td>循环滚动读取文件并动态显示在屏幕上，文件文件名追踪</td></tr><tr><td>wc</td><td></td><td>wc 1.txt</td><td>统计文本的行数、字数、字符数</td></tr><tr><td></td><td>-m</td><td>wc -m 1.txt</td><td>字符数</td></tr><tr><td></td><td>-w</td><td>wc -w 1.txt</td><td>文本字数</td></tr><tr><td></td><td>-l</td><td>wc -l 1.txt</td><td>文本行数</td></tr><tr><td>find</td><td>-name</td><td>find / -name 1.txt</td><td>在文件系统中的指定目录下查找指定的文件</td></tr><tr><td>grep</td><td></td><td>grep aaa 1.txt</td><td>在指定文件中查找包含指定内容的行，例：在1.txt中查找包含aaa的所有行</td></tr><tr><td>ln</td><td></td><td>ln 1.txt 1_bak.txt</td><td>建立链接文件，硬链接，非复制，不占用多余内存</td></tr><tr><td></td><td>-s</td><td>ln -s 1.txt 1_bak.txt</td><td>对源文件建立符号连接，而非硬连接</td></tr></tbody></table><h2 id="2、系统常用命令"><a href="#2、系统常用命令" class="headerlink" title="2、系统常用命令"></a>2、系统常用命令</h2><table><thead><tr><th>命令</th><th>参数</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td>top</td><td></td><td>top</td><td>显示当前系统中耗费资源最多的进程</td></tr><tr><td>date</td><td></td><td>date</td><td>显示系统当前时间</td></tr><tr><td>ps</td><td></td><td></td><td>较少单独使用，配参数根据需求，ps -ef 或者ps-aux</td></tr><tr><td></td><td>-e /-A</td><td>ps -e</td><td>显示所有进程，环境变量</td></tr><tr><td></td><td>-f</td><td>ps -ef</td><td>全格式显示</td></tr><tr><td></td><td>-a</td><td>ps -a</td><td>显示所有用户的所有进程（包括其它用户）</td></tr><tr><td></td><td>-u</td><td>ps -au</td><td>按用户名和启动时间的顺序来显示进程</td></tr><tr><td></td><td>-x</td><td>ps -aux</td><td>显示无控制终端的进程</td></tr><tr><td>kill</td><td>-9</td><td>kill -9 pid</td><td>强制杀死一个进程</td></tr><tr><td>df</td><td></td><td>df</td><td>显示文件系统磁盘空间的使用情况</td></tr><tr><td></td><td>-h</td><td>df -h</td><td>以人类可读的方式显示，Kb，Mb，GB等</td></tr><tr><td>du</td><td></td><td></td><td>显示指定的目录及其子目录已使用的磁盘空间的总和</td></tr><tr><td></td><td>-s</td><td>du -s *</td><td>进显示指定目录的总和，*当前目录下表示所有</td></tr><tr><td></td><td>-h</td><td>du -sh *</td><td>以人类可读的方式显示，Kb，Mb，GB等</td></tr><tr><td>free</td><td></td><td>free</td><td>显示当前内存和交换空间的使用情况</td></tr><tr><td>ifconfig</td><td></td><td>ifconfig</td><td>网卡网络配置，常用于查看当前IP地址</td></tr><tr><td></td><td>ifconfig eth0 192.168.12.22</td><td>临时修改系统IP（重启后失效）</td><td></td></tr><tr><td>ping</td><td></td><td>ping baidu.com</td><td>测试网络的连通性</td></tr><tr><td>hostname</td><td></td><td>hostname</td><td>查看主机名</td></tr><tr><td>shutdown</td><td>-r</td><td>shutdown -r</td><td>先关机，再重启</td></tr><tr><td></td><td>-h</td><td>shutdown -h</td><td>关机后不重启</td></tr><tr><td>halt</td><td></td><td>halt</td><td>关机后关闭电源，相当于shutdown -h</td></tr><tr><td>reboot</td><td></td><td>reboot</td><td>重新启动 相当于shutdown -r</td></tr></tbody></table><h2 id="3、压缩解压"><a href="#3、压缩解压" class="headerlink" title="3、压缩解压"></a>3、压缩解压</h2><table><thead><tr><th>命令</th><th>参数</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td>gzip</td><td></td><td>gzip 1.txt</td><td>压缩后面的文件或者文件夹</td></tr><tr><td></td><td>-d</td><td>gzip -d 1.txt.gz</td><td>解压后面的压缩文件</td></tr><tr><td></td><td>-[num]</td><td>gzip -9 1.txt</td><td>用指定的数字num调整压缩的速度，-1或–fast表示最快压缩方法（低压缩比），-9或–best表示最慢压缩方法（高压缩比）。系统缺省值为6</td></tr><tr><td>tar</td><td>-c</td><td>tar -cvf 1.tar 1.txt</td><td>建立一个压缩文件的参数指令，例，将1.txt压缩为1.tar，也可指定多个文件或文件夹</td></tr><tr><td></td><td>-x</td><td>tar -xvf 1.tar 1.txt</td><td>解开一个压缩文件的参数指令</td></tr><tr><td></td><td>-z</td><td>tar -zcvf 1.tar.gz 1.txt<br />tar -zxvf 1.tar.gz 1.txt</td><td>是否需要用 gzip ，使用gzip压缩或解压</td></tr><tr><td></td><td>-v</td><td></td><td>压缩的过程中显示文件</td></tr><tr><td></td><td>-f</td><td></td><td>使用档名，在 f 之后要立即接档名</td></tr></tbody></table><h2 id="4、文件权限"><a href="#4、文件权限" class="headerlink" title="4、文件权限"></a>4、文件权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   -     rwx     rw-     r--</span><br><span class="line">|-----|-------|-------|-------|</span><br><span class="line">   |      |       |       |</span><br><span class="line">  类型   用户权限  组权限  其他用户权限</span><br></pre></td></tr></table></figure><ul><li><p>r 可读权限，w可写权限，x可执行权限（也可以用二进制表示  111 110 100 –&gt;  764）</p></li><li><p>第1位：文件类型（d 目录，- 普通文件，l 链接文件）</p></li><li><p>第2-4位：所属用户权限，用u（user）表示</p></li><li><p>第5-7位：所属组权限，用g（group）表示</p></li><li><p>第8-10位：其他用户权限，用o（other）表示</p></li><li><p>第2-10位：表示所有的权限，用a（all）表示</p><table><thead><tr><th>命令</th><th>参数</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td>chmod</td><td></td><td>chmod u+r 1.txt</td><td>修改文件或目录的权限u表示当前用户，g表示同组用户，o表示其他用户，a表示所有用户r表示可读，w表示可写，x表示可执行例：修改1.txt文件给当前用户添加可执行权限</td></tr><tr><td></td><td>-R</td><td>chmod -R u+r dir1</td><td>修改指定目录及其子目录的所有文件的权限</td></tr><tr><td></td><td>三位数字</td><td>chmod 764 1.sh</td><td>直接指定文件的权限7：表示可读可写可执行，4+2+1。6：表示可读可写，4+2</td></tr><tr><td>chown</td><td></td><td>chown user1:group1 1.txt</td><td>修改文件的所属用户和组例：将1.txt文件的所属用户指定为user1，组为group1</td></tr><tr><td></td><td>-R</td><td>chown -R user1:group1 1.txt</td><td>修改目录下所有文件及子目录的所属用户和组用数字来表示权限（r=4，w=2，x=1，-=0）</td></tr></tbody></table><h2 id="5、任务调度"><a href="#5、任务调度" class="headerlink" title="5、任务调度"></a>5、任务调度</h2></li><li><p>任务调度分为两类，系统调度任务和用户调度任务</p><ul><li><p>系统任务调度：系统周期性所要执行的工作，比如写缓存数据到硬盘、日志清理等。在/etc目录下有一个crontab文件，这个就是系统任务调度的配置文件。</p></li><li><p>用户任务调度：用户定期要执行的工作，比如用户数据备份、定时邮件提醒等。用户可以使用 crontab 工具来定制自己的计划任务。所有用户定义的crontab 文件都被保存在 /var/spool/cron目录中。其文件名与用户名一致。</p></li></ul></li><li><p>使用者权限文件</p><ul><li>/etc/cron.dey：该文件中所列用户不允许使用crontab命令。</li><li>/etc/cron.allow：该文件中所列用户允许使用crontab命令。</li><li>/var/spool/cron/：所有用户crontab文件存放的目录及用户名</li></ul><p><img src="/image/linux-crontab.png" alt="crontab"></p></li><li><p>命令格式：minute  hour  day  month  week  command</p><ul><li>minute： 表示分钟，可以是从0到59之间的任何整数。</li><li>hour：表示小时，可以是从0到23之间的任何整数。</li><li>day：表示日期，可以是从1到31之间的任何整数。</li><li>month：表示月份，可以是从1到12之间的任何整数。</li><li>week：表示星期几，可以是从0到7之间的任何整数，这里的0或7代表星期日。</li><li>command：要执行的命令，可以是系统命令，也可以是自己编写的脚本文件。</li></ul></li><li><p>特殊字符</p><ul><li>星号（*）：代表所有可能的值，例如month字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。</li><li>逗号（,）：可以用逗号隔开的值指定一个列表范围，例如，“1,2,5,7,8,9”</li><li>中杠（-）：可以用整数之间的中杠表示一个整数范围，例如“2-6”表示“2,3,4,5,6”</li><li>正斜线（/）：可以用正斜线指定时间的间隔频率，例如“0-23/2”表示每两小时执行一次。同时正斜线可以和星号一起使用，例如*/10，如果用在minute字段，表示每十分钟执行一次。</li></ul></li><li><p>命令格式：crontab [-u user] file 或 crontab [-u user] [-e | -l | -r]</p><ul><li>-u user：用来设定某个用户的crontab服务，例如，“-u ixdba”表示设定ixdba用户的crontab服务，此参数一般有root用户来运行。</li><li>file：file是命令文件的名字,表示将file做为crontab的任务列表文件并载入crontab。如果在命令行中没有指定这个文件，crontab命令将接受标准输入（键盘）上键入的命令，并将它们载入crontab。</li><li>-e：编辑某个用户的crontab文件内容。如果不指定用户，则表示编辑当前用户的crontab文件。</li><li>-l：显示某个用户的crontab文件内容，如果不指定用户，则表示显示当前用户的crontab文件内容。</li><li>-r：从/var/spool/cron目录中删除某个用户的crontab文件，如果不指定用户，则默认删除当前用户的crontab文件。</li><li>-i：在删除用户的crontab文件时给确认提示。</li></ul></li></ul><h1 id="三、系统常用快捷键及符号命令"><a href="#三、系统常用快捷键及符号命令" class="headerlink" title="# 三、系统常用快捷键及符号命令"></a># 三、系统常用快捷键及符号命令</h1><table><thead><tr><th>命令</th><th>参数</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td>ctrl+a</td><td></td><td></td><td>跳转命令首字符</td></tr><tr><td>ctrl+e</td><td></td><td></td><td>跳转命令尾字符</td></tr><tr><td>ctrl+w</td><td></td><td></td><td>往回删除一个单词，光标放在最末尾</td></tr><tr><td>ctrl+k</td><td></td><td></td><td>删除光标以后的字符</td></tr><tr><td>ctrl+u</td><td></td><td></td><td>删除光标以前的字符</td></tr><tr><td>ctrl + c</td><td></td><td></td><td>停止进程</td></tr><tr><td>ctrl + l</td><td></td><td></td><td>清屏</td></tr><tr><td>ctrl + r</td><td></td><td></td><td>搜索历史命令</td></tr><tr><td>ctrl + q</td><td></td><td></td><td>退出</td></tr><tr><td>tab</td><td></td><td></td><td>自动补全</td></tr><tr><td>&gt;</td><td></td><td>echo “haha” &gt; 1.txt</td><td>将前一条命令的输出，写入到后面的文本中将文本清空，然后写入</td></tr><tr><td>&gt;&gt;</td><td></td><td>echo “lala” &gt;&gt; 1.txt</td><td>将前一条命令的输出，写入到后面的 文本中不清空文本，追加到文本最后</td></tr><tr><td>|</td><td></td><td>cat 1.txt | grep ‘hello’</td><td>管道命令，以前一个命令的输出作为输入，然后进行运算例：打印1.txt中带有hello字符串的行</td></tr><tr><td>*</td><td></td><td></td><td>通配符，指所有</td></tr></tbody></table><h1 id="四、vim编辑器"><a href="#四、vim编辑器" class="headerlink" title="四、vim编辑器"></a>四、vim编辑器</h1><p><img src="/image/linux-vim-sheet.gif" alt="linux-vim-sheet"></p><p><img src="/image/linux-vim-workmodel.png" alt="linux-vim-workmodel"></p><h2 id="1、修改文本"><a href="#1、修改文本" class="headerlink" title="1、修改文本"></a>1、修改文本</h2><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>i</td><td>在光标前插入</td></tr><tr><td>I</td><td>在光标当前行开始插入</td></tr><tr><td>a</td><td>在光标后插入</td></tr><tr><td>A</td><td>在光标当前行末尾插入</td></tr><tr><td>o</td><td>在光标当前行的下一行插入新行</td></tr><tr><td>O</td><td>在光标当前行的上一行插入新行</td></tr><tr><td>:wq</td><td>保存并退出</td></tr><tr><td>:wq!</td><td>强制保存退出</td></tr><tr><td>:n1,n2 w filename</td><td>将n1,n2的内容保存到filename 这个文件</td></tr></tbody></table><h2 id="2、定位命令"><a href="#2、定位命令" class="headerlink" title="2、定位命令"></a>2、定位命令</h2><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>:set nu</td><td>显示行号</td></tr><tr><td>:set nonu</td><td>取消行号</td></tr><tr><td>gg</td><td>跳到首行</td></tr><tr><td>G</td><td>跳到末行</td></tr><tr><td>:n</td><td>跳到第n行</td></tr><tr><td>/word</td><td>向下查找word字符</td></tr><tr><td>?word</td><td>向上查找word字符</td></tr><tr><td>n</td><td>继续重复前一查找动作</td></tr><tr><td>N</td><td>继续反方向重复查找动作</td></tr></tbody></table><h2 id="3、替换和取消命令"><a href="#3、替换和取消命令" class="headerlink" title="3、替换和取消命令"></a>3、替换和取消命令</h2><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>u</td><td>undo，取消上一步操作</td></tr><tr><td>ctrl + r</td><td>redo，返回到undo之前</td></tr><tr><td>r</td><td>替换光标所在处的字符</td></tr><tr><td>R</td><td>从光标所在处开始替换，按Esc键结束</td></tr><tr><td>:n1,n2s/word1/word2/g</td><td>表示n1-n2行的word1被替换为word2</td></tr><tr><td>:n1,$s/word1/word2/g</td><td>从n1-末行的word1被替换为word2</td></tr><tr><td>:n1,$s/word1/word2/gc</td><td>功能同上给予确认的替换</td></tr></tbody></table><h2 id="4、删除-复制命令"><a href="#4、删除-复制命令" class="headerlink" title="4、删除/复制命令"></a>4、删除/复制命令</h2><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>x或X</td><td>删除光标所在处字符</td></tr><tr><td>nx</td><td>删除光标所在处后的n个字符</td></tr><tr><td>ndw或ndW</td><td>删除光标开始及其后的n-1个词</td></tr><tr><td>dd</td><td>删除光标所在行。ndd删除光标所在行接下来的n行</td></tr><tr><td>dG</td><td>删除光标所在行到末尾行的所以内容</td></tr><tr><td>D</td><td>删除光标所在处到行尾的内容</td></tr><tr><td>:5,7d</td><td>删除5到7行</td></tr><tr><td>:.,$d</td><td>从当前行到文件末尾。【.】表示当前行，【$】 表示最后一行。</td></tr><tr><td>:.,1d</td><td>从当前行到文件开头。</td></tr><tr><td>:10,$d</td><td>从第十行到文件末尾。</td></tr><tr><td>ynw</td><td>复制n个单词</td></tr><tr><td>y$</td><td>复制当前光标至行尾处</td></tr><tr><td>nyy</td><td>复制n行</td></tr><tr><td>p</td><td>下下面粘贴</td></tr><tr><td>P</td><td>向上面粘贴</td></tr></tbody></table><h2 id="5、常用快捷键"><a href="#5、常用快捷键" class="headerlink" title="5、常用快捷键"></a>5、常用快捷键</h2><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>hift+ zz</td><td>保存退出，与“:wq”作用相同</td></tr><tr><td>v</td><td>进入字符可视模式</td></tr><tr><td>ctrl + v</td><td>进入块可视模式</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;一、linux目录结构&quot;&gt;&lt;a href=&quot;#一、linux目录结构&quot; class=&quot;headerlink&quot; title=&quot;一、linux目录结构&quot;&gt;&lt;/a&gt;一、linux目录结构&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;tabl
      
    
    </summary>
    
    
      <category term="操作系统" scheme="https://blog.agphp.com/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    
      <category term="Linux" scheme="https://blog.agphp.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Hexo搭建个人博客</title>
    <link href="https://blog.agphp.com/2019/04/03/hexo-build-bolg.html"/>
    <id>https://blog.agphp.com/2019/04/03/hexo-build-bolg.html</id>
    <published>2019-04-03T10:24:00.000Z</published>
    <updated>2020-05-06T08:42:44.649Z</updated>
    
    <content type="html"><![CDATA[<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>预先安装NodeJS和Git。</p><h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Hexo安装</span></span><br><span class="line">npm install hexo -g</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更新Hexo</span></span><br><span class="line">npm update hexo -g</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 初始化</span></span><br><span class="line">hexo init &lt;folder&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 生成网站 hexo generate</span></span><br><span class="line">hexo g</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动本地服务 hexo server</span></span><br><span class="line">hexo s</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 网站部署三部操作</span></span><br><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 常用命令汇总</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建文章</span></span><br><span class="line">hexo new 'postName'</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建页面</span></span><br><span class="line">hexo new page 'pageName'</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 生成静态页面到public目录</span></span><br><span class="line">hexo generate</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动本地服务</span></span><br><span class="line">hexo server</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将.deploy目录部署到GitHub</span></span><br><span class="line">hexo deploy</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看帮助</span></span><br><span class="line">hexo help</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看版本</span></span><br><span class="line">hexo version</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 命令的简写</span></span><br><span class="line">hexo n == hexo new</span><br><span class="line">hexo g == hexo generate</span><br><span class="line">hexo s == hexo server</span><br><span class="line">hexo d == hexo deploy</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;准备工作&quot;&gt;&lt;a href=&quot;#准备工作&quot; class=&quot;headerlink&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h2&gt;&lt;p&gt;预先安装NodeJS和Git。&lt;/p&gt;
&lt;h2 id=&quot;基本操作&quot;&gt;&lt;a href=&quot;#基本操作&quot; class=&quot;heade
      
    
    </summary>
    
    
      <category term="工具" scheme="https://blog.agphp.com/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="Node" scheme="https://blog.agphp.com/tags/Node/"/>
    
      <category term="NPM" scheme="https://blog.agphp.com/tags/NPM/"/>
    
      <category term="Hexo" scheme="https://blog.agphp.com/tags/Hexo/"/>
    
      <category term="工具" scheme="https://blog.agphp.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="GitHub" scheme="https://blog.agphp.com/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>Linux系统安装Nodejs</title>
    <link href="https://blog.agphp.com/2019/04/02/install-nodejs.html"/>
    <id>https://blog.agphp.com/2019/04/02/install-nodejs.html</id>
    <published>2019-04-02T10:24:00.000Z</published>
    <updated>2020-10-27T04:36:53.370Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简单记录nodejs安装过程"><a href="#简单记录nodejs安装过程" class="headerlink" title="简单记录nodejs安装过程"></a>简单记录nodejs安装过程</h2><p>下载地址： <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">https://nodejs.org/en/download/</a> ，点击进入选择合适的编译包。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 检查是否已经安装</span></span><br><span class="line">whereis nodejs</span><br><span class="line">whereis node</span><br><span class="line">whereis npm</span><br><span class="line"><span class="meta">#</span><span class="bash"> 下载</span></span><br><span class="line">wget https://nodejs.org/dist/v12.16.3/node-v12.16.3-linux-x64.tar.xz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压</span></span><br><span class="line">tag -xvf node-v12.16.3-darwin-x64.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 重命名</span></span><br><span class="line">mv node-v12.16.3-darwin-x64 nodejs</span><br><span class="line"><span class="meta">#</span><span class="bash"> 移动</span></span><br><span class="line">mv nodejs /usr/sbin/</span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置软连接</span></span><br><span class="line">ln -s /usr/sbin/nodejs/bin/node /usr/local/bin</span><br><span class="line">ln -s /usr/sbin/nodejs/bin/npm /usr/local/bin</span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查安装</span></span><br><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;简单记录nodejs安装过程&quot;&gt;&lt;a href=&quot;#简单记录nodejs安装过程&quot; class=&quot;headerlink&quot; title=&quot;简单记录nodejs安装过程&quot;&gt;&lt;/a&gt;简单记录nodejs安装过程&lt;/h2&gt;&lt;p&gt;下载地址： &lt;a href=&quot;https:/
      
    
    </summary>
    
    
      <category term="前端" scheme="https://blog.agphp.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Node" scheme="https://blog.agphp.com/tags/Node/"/>
    
      <category term="NodeJS" scheme="https://blog.agphp.com/tags/NodeJS/"/>
    
      <category term="NPM" scheme="https://blog.agphp.com/tags/NPM/"/>
    
  </entry>
  
  <entry>
    <title>PHP中的浮点数问题</title>
    <link href="https://blog.agphp.com/2018/10/27/php-float.html"/>
    <id>https://blog.agphp.com/2018/10/27/php-float.html</id>
    <published>2018-10-26T17:24:00.000Z</published>
    <updated>2020-10-27T04:38:35.896Z</updated>
    
    <content type="html"><![CDATA[<p>如果用php的+-*/计算浮点数的时候，可能会遇到一些计算结果错误的问题，比如下面这种情况： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo intval(0.58*100);// 57</span><br><span class="line">echo (int) (0.58*100);// 57</span><br><span class="line">echo round(0.58*100); // 58</span><br><span class="line">var_dump((0.1 + 0.7) == 0.8); // false</span><br></pre></td></tr></table></figure><p>之所以出现上面的问题是因为PHP 是使用二进制表示浮点数的，这是支持二进制浮点数运算（绝大部分都是 IEEE-745浮点数表示法 的实现）的系统都存在一个现象（<a href="https://www.zhihu.com/question/20679634" target="_blank" rel="noopener">具体原因，想要知道的朋友可以点击这里查看</a>）。</p><p>所以在浮点数转换整数的时候（比如微信支付接口支付金额需转换成单位）建议可以使用<strong>round()</strong>函数，或者计算的时候使用BC高精度函数。</p><p><strong>常用的高精度函数如下：</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">　　bcadd — 将两个高精度数字相加</span><br><span class="line"></span><br><span class="line">　　bccomp — 比较两个高精度数字，返回<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"></span><br><span class="line">　　bcdiv — 将两个高精度数字相除</span><br><span class="line"></span><br><span class="line">　　bcmod — 求高精度数字余数</span><br><span class="line"></span><br><span class="line">　　bcmul — 将两个高精度数字相乘</span><br><span class="line"></span><br><span class="line">　　bcpow — 求高精度数字乘方</span><br><span class="line"></span><br><span class="line">　　bcpowmod — 求高精度数字乘方求模，数论里非常常用</span><br><span class="line"></span><br><span class="line">　　bcscale — 配置默认小数点位数，相当于就是Linux bc中的”scale=”</span><br><span class="line"></span><br><span class="line">　　bcsqrt — 求高精度数字平方根</span><br><span class="line"></span><br><span class="line">　　bcsub — 将两个高精度数字相减</span><br></pre></td></tr></table></figure><p><strong>使用方法举例如下：</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 两个高精度数比较</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@access</span> global</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> float $left</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> float $right</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> int $scale 精确到的小数点位数</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span> int $left==$right 返回 0 | $left&lt;$right 返回 -1 | $left&gt;$right 返回 1</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">var_dump(bccomp($left=<span class="number">4.45</span>, $right=<span class="number">5.54</span>, <span class="number">2</span>));</span><br><span class="line"><span class="comment">// -1</span></span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 两个高精度数相加</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@access</span> global</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> float $left</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> float $right</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> int $scale 精确到的小数点位数</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span> string </span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">var_dump(bcadd($left=<span class="number">1.0321456</span>, $right=<span class="number">0.0243456</span>, <span class="number">2</span>));</span><br><span class="line"><span class="comment">//1.05</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 两个高精度数相减</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@access</span> global</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> float $left</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> float $right</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> int $scale 精确到的小数点位数</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span> string </span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">var_dump(bcsub($left=<span class="number">1.0321456</span>, $right=<span class="number">3.0123456</span>, <span class="number">2</span>));</span><br><span class="line"><span class="comment">//-1.98</span></span><br><span class="line">  </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 两个高精度数相除</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@access</span> global</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> float $left</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> float $right</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> int $scale 精确到的小数点位数</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span> string </span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">var_dump(bcdiv($left=<span class="number">6</span>, $right=<span class="number">5</span>, <span class="number">2</span>));</span><br><span class="line"><span class="comment">//1.20</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 两个高精度数相乘</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@access</span> global</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> float $left</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> float $right</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> int $scale 精确到的小数点位数</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span> string </span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">var_dump(bcmul($left=<span class="number">3.1415926</span>, $right=<span class="number">2.4569874566</span>, <span class="number">2</span>));</span><br><span class="line"><span class="comment">//7.71</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 设置bc函数的小数点位数</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@access</span> global</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> int $scale 精确到的小数点位数</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span> void </span></span><br><span class="line"><span class="comment">  */</span> </span><br><span class="line">bcscale(<span class="number">3</span>);</span><br><span class="line">var_dump(bcdiv(<span class="string">'105'</span>, <span class="string">'6.55957'</span>)); </span><br><span class="line"><span class="comment">//16.007</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;如果用php的+-*/计算浮点数的时候，可能会遇到一些计算结果错误的问题，比如下面这种情况： &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;
      
    
    </summary>
    
    
      <category term="PHP" scheme="https://blog.agphp.com/categories/PHP/"/>
    
    
      <category term="PHP" scheme="https://blog.agphp.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>PHP常用函数-身份证格式校验</title>
    <link href="https://blog.agphp.com/2017/10/25/php-func-identity-verify.html"/>
    <id>https://blog.agphp.com/2017/10/25/php-func-identity-verify.html</id>
    <published>2017-10-25T10:06:00.000Z</published>
    <updated>2020-10-27T04:38:41.612Z</updated>
    
    <content type="html"><![CDATA[<h5 id="PHP常用函数-身份证格式校验"><a href="#PHP常用函数-身份证格式校验" class="headerlink" title="PHP常用函数-身份证格式校验"></a>PHP常用函数-身份证格式校验</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">下面是身份证编码各个部分的含义:</span><br><span class="line"><span class="comment">//=============新的18位身份证号码各位的含义:=======================</span></span><br><span class="line"><span class="comment">//1-2位省、自治区、直辖市代码；11-65</span></span><br><span class="line"><span class="comment">//3-4位地级市、盟、自治州代码；</span></span><br><span class="line"><span class="comment">//5-6位县、县级市、区代码；</span></span><br><span class="line"><span class="comment">//7-14位出生年月日，比如19670401代表1967年4月1日；</span></span><br><span class="line"><span class="comment">//15-17位为顺序号，其中17位男为单数，女为双数；</span></span><br><span class="line"><span class="comment">//18位为校验码，0-9和X，由公式随机产生。</span></span><br><span class="line"><span class="comment">//举例：</span></span><br><span class="line"><span class="comment">//130503 19670401 0012这个身份证号的含义: 13为河北，05为邢台，03为桥西区，出生日期为1967年4月1日，顺序号为001，2为验证码</span></span><br><span class="line"><span class="comment">//===========15位身份证号码各位的含义:=======================</span></span><br><span class="line"><span class="comment">//1-2位省、自治区、直辖市代码；</span></span><br><span class="line"><span class="comment">//3-4位地级市、盟、自治州代码；</span></span><br><span class="line"><span class="comment">//5-6位县、县级市、区代码；</span></span><br><span class="line"><span class="comment">//7-12位出生年月日,比如670401代表1967年4月1日,这是和18位号码的第一个区别；</span></span><br><span class="line"><span class="comment">//13-15位为顺序号，其中15位男为单数，女为双数；</span></span><br><span class="line"><span class="comment">//与18位身份证号的第二个区别：没有最后一位的验证码。</span></span><br><span class="line"><span class="comment">//举例：</span></span><br><span class="line"><span class="comment">//130503 670401 001的含义; 13为河北，05为邢台，03为桥西区，出生日期为1967年4月1日，顺序号为001。</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IdentityCard</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 校验身份证号是否合法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $num 待校验的身份证号</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> bool</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">isValid</span><span class="params">(string $num)</span></span>&#123;</span><br><span class="line">        <span class="comment">//老身份证长度15位，新身份证长度18位</span></span><br><span class="line">        $length = strlen($num);</span><br><span class="line">        <span class="keyword">if</span> ($length == <span class="number">15</span>) &#123; <span class="comment">//如果是15位身份证</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//15位身份证没有字母</span></span><br><span class="line">            <span class="keyword">if</span> (!is_numeric($num)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 省市县（6位）</span></span><br><span class="line">            $areaNum = substr($num, <span class="number">0</span>, <span class="number">6</span>);</span><br><span class="line">            <span class="comment">// 出生年月（6位）</span></span><br><span class="line">            $dateNum = substr($num, <span class="number">6</span>, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ($length == <span class="number">18</span>) &#123; <span class="comment">//如果是18位身份证</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//基本格式校验</span></span><br><span class="line">            <span class="keyword">if</span> (!preg_match(<span class="string">'/^\d&#123;17&#125;[0-9xX]$/'</span>, $num)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 省市县（6位）</span></span><br><span class="line">            $areaNum = substr($num, <span class="number">0</span>, <span class="number">6</span>);</span><br><span class="line">            <span class="comment">// 出生年月日（8位）</span></span><br><span class="line">            $dateNum = substr($num, <span class="number">6</span>, <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">//假身份证</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//验证地区</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">self</span>::isAreaCodeValid($areaNum)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//验证日期</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">self</span>::isDateValid($dateNum)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//验证最后一位</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">self</span>::isVerifyCodeValid($num)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 省市自治区校验</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $area 省、直辖市代码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> bool</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">isAreaCodeValid</span><span class="params">(string $area)</span> </span>&#123;</span><br><span class="line">        $provinceCode = substr($area, <span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据GB/T2260—999，省市代码11到65</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="number">11</span> &lt;= $provinceCode &amp;&amp; $provinceCode &lt;= <span class="number">65</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 验证出生日期合法性</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $date 日期</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> bool</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">isDateValid</span><span class="params">(string $date)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (strlen($date) == <span class="number">6</span>) &#123; <span class="comment">//15位身份证号没有年份，这里拼上年份</span></span><br><span class="line">            $date = <span class="string">'19'</span>.$date;</span><br><span class="line">        &#125;</span><br><span class="line">        $year  = intval(substr($date, <span class="number">0</span>, <span class="number">4</span>));</span><br><span class="line">        $month = intval(substr($date, <span class="number">4</span>, <span class="number">2</span>));</span><br><span class="line">        $day   = intval(substr($date, <span class="number">6</span>, <span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//日期基本格式校验</span></span><br><span class="line">        <span class="keyword">if</span> (!checkdate($month, $day, $year)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//日期格式正确，但是逻辑存在问题(如:年份大于当前年)</span></span><br><span class="line">        $currYear = date(<span class="string">'Y'</span>);</span><br><span class="line">        <span class="keyword">if</span> ($year &gt; $currYear) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 验证18位身份证最后一位</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $num 待校验的身份证号</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> bool</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">isVerifyCodeValid</span><span class="params">(string $num)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (strlen($num) == <span class="number">18</span>) &#123;</span><br><span class="line">            $factor = [<span class="number">7</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">2</span>];</span><br><span class="line">            $tokens = [<span class="string">'1'</span>, <span class="string">'0'</span>, <span class="string">'X'</span>, <span class="string">'9'</span>, <span class="string">'8'</span>, <span class="string">'7'</span>, <span class="string">'6'</span>, <span class="string">'5'</span>, <span class="string">'4'</span>, <span class="string">'3'</span>, <span class="string">'2'</span>];</span><br><span class="line"></span><br><span class="line">            $checkSum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; <span class="number">17</span>; $i++) &#123;</span><br><span class="line">                $checkSum += intval($num&#123;$i&#125;) * $factor[$i];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            $mod   = $checkSum % <span class="number">11</span>;</span><br><span class="line">            $token = $tokens[$mod];</span><br><span class="line"></span><br><span class="line">            $lastChar = strtoupper($num&#123;<span class="number">17</span>&#125;);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ($lastChar != $token) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h5 id=&quot;PHP常用函数-身份证格式校验&quot;&gt;&lt;a href=&quot;#PHP常用函数-身份证格式校验&quot; class=&quot;headerlink&quot; title=&quot;PHP常用函数-身份证格式校验&quot;&gt;&lt;/a&gt;PHP常用函数-身份证格式校验&lt;/h5&gt;&lt;figure class=&quot;highli
      
    
    </summary>
    
    
      <category term="PHP" scheme="https://blog.agphp.com/categories/PHP/"/>
    
    
      <category term="PHP" scheme="https://blog.agphp.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>表单控制输入数字</title>
    <link href="https://blog.agphp.com/2017/10/23/input-limit-num.html"/>
    <id>https://blog.agphp.com/2017/10/23/input-limit-num.html</id>
    <published>2017-10-23T11:04:00.000Z</published>
    <updated>2020-10-27T04:36:50.064Z</updated>
    
    <content type="html"><![CDATA[<p>前端表单限制仅可输入数字:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"text"</span> name=<span class="string">"number"</span> onkeyup=<span class="string">"floatNum(this)"</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数字校验 2位小数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">floatNum</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    obj.value = obj.value.replace(<span class="regexp">/[^\d.]/g</span>,<span class="string">""</span>); <span class="comment">//清除"数字"和"."以外的字符</span></span><br><span class="line">    obj.value = obj.value.replace(<span class="regexp">/^\./g</span>,<span class="string">""</span>); <span class="comment">//验证第一个字符是数字</span></span><br><span class="line">    obj.value = obj.value.replace(<span class="regexp">/\.&#123;2,&#125;/g</span>,<span class="string">"."</span>); <span class="comment">//只保留第一个, 清除多余的</span></span><br><span class="line">    obj.value = obj.value.replace(<span class="string">"."</span>,<span class="string">"$#$"</span>).replace(<span class="regexp">/\./g</span>,<span class="string">""</span>).replace(<span class="string">"$#$"</span>,<span class="string">"."</span>);</span><br><span class="line">    obj.value = obj.value.replace(<span class="regexp">/^(\-)*(\d+)\.(\d\d).*$/</span>,<span class="string">'$1$2.$3'</span>); <span class="comment">//只能输入两个小数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 数字校验 2位小数 允许负值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">floatNum2</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    obj.value = obj.value.replace(<span class="regexp">/[^\-\d.]/g</span>,<span class="string">""</span>); <span class="comment">//清除"数字"和"."以外的字符</span></span><br><span class="line">    obj.value = obj.value.replace(<span class="regexp">/^\./g</span>,<span class="string">""</span>); <span class="comment">//验证第一个字符是数字</span></span><br><span class="line">    obj.value = obj.value.replace(<span class="regexp">/\-&#123;2,&#125;/g</span>,<span class="string">"-"</span>); <span class="comment">//只保留第一个, 清除多余的</span></span><br><span class="line">    obj.value = obj.value.replace(<span class="regexp">/\.&#123;2,&#125;/g</span>,<span class="string">"."</span>); <span class="comment">//只保留第一个, 清除多余的</span></span><br><span class="line">    obj.value = obj.value.replace(<span class="string">"."</span>,<span class="string">"$#$"</span>).replace(<span class="regexp">/\./g</span>,<span class="string">""</span>).replace(<span class="string">"$#$"</span>,<span class="string">"."</span>);</span><br><span class="line">    obj.value = obj.value.replace(<span class="regexp">/^(\-)*(\d+)\.(\d\d).*$/</span>,<span class="string">'$1$2.$3'</span>); <span class="comment">//只能输入两个小数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;前端表单限制仅可输入数字:&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/sp
      
    
    </summary>
    
    
      <category term="前端" scheme="https://blog.agphp.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="https://blog.agphp.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Layui5.0设置最大最小值</title>
    <link href="https://blog.agphp.com/2017/10/23/layui-set-max-min.html"/>
    <id>https://blog.agphp.com/2017/10/23/layui-set-max-min.html</id>
    <published>2017-10-23T10:50:39.000Z</published>
    <updated>2020-10-27T04:36:57.273Z</updated>
    
    <content type="html"><![CDATA[<p>由于新版的laydate时间插件在初始化时已设置时间最大最小范围，且生成对象，无法重新渲染改变其日期最大最小值。</p><p>有网友经试验贴出如下方法可达成目的，故做记录。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//开始时间</span></span><br><span class="line"><span class="keyword">var</span> startDate = laydate.render(&#123;</span><br><span class="line">    elem: <span class="string">'#start'</span>, </span><br><span class="line">    done: <span class="function"><span class="keyword">function</span> (<span class="params">value, date</span>) </span>&#123;</span><br><span class="line">        endDate.config.min = &#123;</span><br><span class="line">            year: date.year, </span><br><span class="line">            month: date.month<span class="number">-1</span>, </span><br><span class="line">            date: date.date,</span><br><span class="line">            hours: date.hours,</span><br><span class="line">            minutes: date.minutes,</span><br><span class="line">            seconds: date.seconds</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//结束时间</span></span><br><span class="line"><span class="keyword">var</span> endDate = laydate.render(&#123;</span><br><span class="line">    elem: <span class="string">'#end'</span>, </span><br><span class="line">    done: <span class="function"><span class="keyword">function</span> (<span class="params">value, date</span>) </span>&#123;</span><br><span class="line">        startDate.config.max = &#123;</span><br><span class="line">            year: date.year,</span><br><span class="line">            month: date.month<span class="number">-1</span>,</span><br><span class="line">            date: date.date,</span><br><span class="line">            hours: date.hours,</span><br><span class="line">            minutes: date.minutes,</span><br><span class="line">            seconds: date.seconds</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;由于新版的laydate时间插件在初始化时已设置时间最大最小范围，且生成对象，无法重新渲染改变其日期最大最小值。&lt;/p&gt;
&lt;p&gt;有网友经试验贴出如下方法可达成目的，故做记录。&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td c
      
    
    </summary>
    
    
      <category term="前端" scheme="https://blog.agphp.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="https://blog.agphp.com/tags/JavaScript/"/>
    
      <category term="Layui" scheme="https://blog.agphp.com/tags/Layui/"/>
    
  </entry>
  
  <entry>
    <title>MySQL：数据存在则更新，不存在则插入</title>
    <link href="https://blog.agphp.com/2017/05/23/mysql-insert-update.html"/>
    <id>https://blog.agphp.com/2017/05/23/mysql-insert-update.html</id>
    <published>2017-05-23T09:18:00.000Z</published>
    <updated>2020-10-27T04:38:32.826Z</updated>
    
    <content type="html"><![CDATA[<p>前提：表结构存在主键或唯一索引，插入数据包含主键或唯一索引而导致记录重复插入失败。</p><p>单条记录更新插入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO table_name  (a,b,c) VALUES (1,2,3)</span><br><span class="line">ON DUPLICATE KEY UPDATE a=1,b=2,c=3;</span><br></pre></td></tr></table></figure><p>多条记录批量更新插入：：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO table_name  (a,b,c) VALUES (1,2,3),(4,5,6) </span><br><span class="line">ON DUPLICATE KEY UPDATE a=VALUES(a),b=VALUES(b),c=VALUES(c);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;前提：表结构存在主键或唯一索引，插入数据包含主键或唯一索引而导致记录重复插入失败。&lt;/p&gt;
&lt;p&gt;单条记录更新插入：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span c
      
    
    </summary>
    
    
      <category term="数据库" scheme="https://blog.agphp.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="MySQL" scheme="https://blog.agphp.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Xshell配色方案推荐</title>
    <link href="https://blog.agphp.com/2017/04/28/xshell-mycolor.html"/>
    <id>https://blog.agphp.com/2017/04/28/xshell-mycolor.html</id>
    <published>2017-04-28T08:25:00.000Z</published>
    <updated>2020-10-27T04:38:46.409Z</updated>
    
    <content type="html"><![CDATA[<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><p> 1.新建mycolor.xcs文件（名字可以随意修改）<br> 2.复制粘贴如下代码，将文件导入，修改自己喜欢的字体即可</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[mycolor]</span><br><span class="line">text=00ff80</span><br><span class="line">cyan(bold)=00ffff</span><br><span class="line">text(bold)=e9e9e9</span><br><span class="line">magenta=c000c0</span><br><span class="line">green=80ff00</span><br><span class="line">green(bold)=3c5a38</span><br><span class="line">background=042028</span><br><span class="line">cyan=00c0c0</span><br><span class="line">red(bold)=ff0000</span><br><span class="line">yellow=c0c000</span><br><span class="line">magenta(bold)=ff00ff</span><br><span class="line">yellow(bold)=ffff00</span><br><span class="line">red=ff4500</span><br><span class="line">white=c0c0c0</span><br><span class="line">blue(bold)=1e90ff</span><br><span class="line">white(bold)=fdf6e3</span><br><span class="line">black=000000</span><br><span class="line">blue=00bfff</span><br><span class="line">black(bold)=808080</span><br><span class="line">[Names]</span><br><span class="line">name0=mycolor</span><br><span class="line">count=1</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;使用方法&quot;&gt;&lt;a href=&quot;#使用方法&quot; class=&quot;headerlink&quot; title=&quot;使用方法&quot;&gt;&lt;/a&gt;使用方法&lt;/h2&gt;&lt;p&gt; 1.新建mycolor.xcs文件（名字可以随意修改）&lt;br&gt; 2.复制粘贴如下代码，将文件导入，修改自己喜欢的字体即可&lt;
      
    
    </summary>
    
    
      <category term="工具" scheme="https://blog.agphp.com/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="工具" scheme="https://blog.agphp.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="Xshell" scheme="https://blog.agphp.com/tags/Xshell/"/>
    
  </entry>
  
</feed>
